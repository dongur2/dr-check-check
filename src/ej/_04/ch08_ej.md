# 8장. 가상 메모리의 기초

## 01 가상 메모리의 개요

### 1. 가상 메모리 시스템

1. 가상 메모리의 개념
> 가상메모리란
- 크기가 다른 물리 메모리에서 일관되게 프로세스를 실행할 수 있는 기술

2. 동적 주소 변환
- 메모리 관리자: **“가상 주소 (물리 메모리 + 스왑 영역) → 실제 메모리의 물리 주소”** 로 변환
- 프로세스가 아무 제약 없이 사용자 데이터를 물리 메모리에 배치 가능
3. 크기
- 메모리 관리자가 사용할 수 있는 메모리의 전체 크기는 물리 메모리와 스왑영역을 합한 크기

### 2. 매핑 테이블의 필요성과 역할

- 가상 주소는 실제로 물리 주소나 스왑 영역 중 한 곳에 위치
- 페이지 매핑 테이블과 세그먼테이션 매핑 테이블

### 3. 지역성

1. 정의
- 기억 장치에 접근하는 패턴이 특정 영역에 집중되는 성질

2. 분류
- 공간의 지역성: 현재 위치에서 가까운 데이터에 접근할 확률이 높다
- 시간의 지역성: 가장 가까운 시간에 접근한 데이터가 사용될 확률이 높다
- 순차적 지역성: 작업이 순서대로 진행된다

## 02 페이징 기법

### 1. 페이징 기법의 구현

### 2. 페이징 기법의 주소 변환

1. 정형화된 주소 변환
- VA=<P,D> →PA=<F,D>
- 가상 주소를 물리 주소로 변환
- 페이지 테이블을 이용하면 간단히 변환 가능
    - 페이지 번호를 찾아 해당 프레임 번호를 쫓아가기
2. 16bit CPU의 주소 변환 예
- 페이지 테이블의 크기는 프로세스의 크기에 비례한다
- 가상 주소를 많이 사용하면 페이지 테이블의 크기가 늘어난다

### 3. 페이지 테이블 관리

1. 메모리 공유
- 한 번에 실행하는 프로세스 수가 많으면, 페이지 테이블의 크기가 같이 커진다. 메모리 영역이 줄어든다
- 페이지 테이블 기준 레지스터에 페이지 테이블의 시작 주소를 보관
2. 쓰기 시점 복사
- 데이터 변화가 있을 때까지 복사 미루기
3. 변환 색인 버퍼
- 가상 주소를 물리 주소로 변환하는 작업을 CPU 안에 있는 메모리 관리 유닛이 담당
4. 역페이지 테이블
- 기존과 달리 반대로 페이지 테이블 구성
- 특징
    - 프로세스 수와 상관없이 테이블이 하나만 존재한다
    - 프로세스의 수와 상관없이 항상 일정 크기의 페이지 테이블을 유지
- 장점
    - 크기가 작다
- 단점
    - 프로세스가 물리 메모리에 접근할 때, 프로세스 아이디와 페이지 번호를 찾아야 하는 것이 단점
5. 다단계 페이지 테이블
- 크기가 늘어난 페이지 테이블 관리
- 멀티 페이지 매핑
- 장점
    - 크기가 큰 페이지 테이블을 같은 크기의 묶음으로 나누어 효율적으로 관리

## 03 세그먼테이션 기법

- 가변 분할 방식
- limit: 각 세그먼트가 자신에게 주어진 메모리 영역을 넘어가면 안된다