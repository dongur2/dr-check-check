# 7장. 물리 메모리 관리

## 01 메모리 관리의 개요

### 1. 메모리 이해하기

1. 주소
- 1바이트 크기로 나뉨
- 0번지에서 시작

### 2. 메모리 관리의 이중성

- 프로세스: 메모리 독차지하고 싶어한다
- 메모리 관리자: 관리를 효율적으로 하고 싶어한다

⇒ 이 과정에서 상충되는 두 입장을 메모리 관리의 이중성이라 한다.

### 3. 소스코드의 번역과 실행

1. 인터프리터 방식
- 위에서 아래로 한 행씩 읽어가며 요리 완성
- 독불장군 느낌
2. 컴파일러 방식
- 오류를 미리 확인하고 수정하는 방식

### 4. 메모리 관리 작업

1. 페이징과 세그멘테이션
- 페이징: 같은 크기
- 세그멘테이션: 메모리 크기에 맞춰 자르기
- 인사이드아웃2의 불안이

## 02 메모리 주소

### 1. 32bit CPU와 64bit CPU의 차이

### 2. 논리 주소와 물리 주소

1. 메모리 영역의 구분
- 단순 메모리 구조: 운영체제 영역과 사용자 영역으로 나누어 관리
    - 운영체제가 0번지부터 사용
- 상위 메모리부터 사용자 영역으로 설정한 구조
    - 시작점 결정이 쉽다
    - 메모리를 거꾸로 사용하여 주소 변경이 복잡하다
- 운영체제와 경계 레지스터
    - 경계 레지스터: 사용자 영역을 막는 역할
2. 논리 주소와 물리 주소의 변환
- 논리 주소: 사용자 프로세스 입장의 주소
- 물리 주소: 램 메모리의 실제 주소
- 메모리 관리 유닛
    - CPU안에 존재하며 프로세스가 논리 주소에 접근할 때마다 물리 주소로 변환하는 작업

## 03 단일 프로그래밍 환경의 메모리 할당

### 1. 메모리 오버레이

- 프로그램 크기가 메모리보다 크면, 잘라서 가져오기

### 2. 스왑

- 쫓겨난 프로세스를 임시 보관해주는 영역

## 04 다중 프로그래밍 환경의 메모리할당

### 1. 메모리 분할 방식

1. 가변 분할 방식
- 프로세스 크기에 맞게 메모리가 분할
- 연속 메모리 할당
- 장점
    - 1개의 프로세스를 연속된 공간에 배치
- 단점
    - 메모리 관리가 복잡
2. 고정 분할 방식
- 프로세스의 크기에 상관없이 같은 크기로 나뉜다
- 비연속 메모리 할당
- 장점
    - 메모리 관리가 편하다
- 단점
    - 하나의 프로세스가 여러 곳으로 나뉠 수 있다

### 가변 분할 방식과 고정 분할 방식의 비교

| 구분 | 가변 분할 방식 | 고정 분할 방식 |
| --- | --- | --- |
| 메모리 관리 기법 | 세그먼테이션 | 페이징 |
| 특징 | 연속 메모리 할당 | 비연속 메모리 할당 |
| 장점 | 프로세스를 한 덩어리로 관리 가능 | 메모리 관리가 편리함 |
| 단점 | 빈 공간의 관리가 어려움 | 프로세스가 분할 되어 처리됨 |
| 단편화 | 외부 단편화 | 내부 단편화 |

### 4. 버디 시스템

1. 버디 시스템의 작동 방식
- 메모리를 절반으로 나누고, 프로세스가 종료될 때마다 주변을 살펴서 빈 구역을 하나로 합치기
2. 특징
- 비슷한 크기의 더엉리가 서로 모여 있어 통합하기 쉬워 효율적으로 공간 관리 가능
- 내부 단편화 발생