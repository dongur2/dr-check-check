## 역할, 책임, 협력

---

### 협력

- 요청하고 응답하며 협력하는 사람들
  - 정황 또는 문맥(context)이 인간의 행동 방식을 결정함
  - 협력이라는 문맥이 객체의 행동 방식을 결정
  - 다수의 요청과 응답의 연쇄적인 흐름으로 구성됨
- 재판 속의 협력
  - 요청과 응답은 협력에 참여하는 객체가 수행할 책임을 정의

### 책임

- 책임의 분류
  - 하는 것(doing)
    - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
  - 아는 것(knowing)
    - 개인적인 정보에 관해 아는 것
    - 관련된 객체에 대해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
  - 공용 인터페이스(public interface) 구성
    - 외부에 제공해 줄 수 있는 정보(아는 것)와 외부에 제공해 줄 수 있는 서비스(하는 것)의 목록
- 책임과 메시지
  - 메시지 전송(message-send): 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것
    - 수신자/송신자
    - 두 객체 사이의 관계를 강조
  - 하나의 책임이 여러 메시지로 분할
  - 객체지향 설계
    1. 협력에 참여하기 위해 어떤 객체가 어떤 책임을 수행하고
    2. 어떤 객체로부터 메시지를 수신할 것인지 결정

### 역할

- 책임의 집합이 의미하는 것
  - **어떤 객체가 수행하는 책임의 집합은 객체가 협력 안에서 수행하는 역할을 암시**
- 역할이 답이다
  - 역할을 사용하면 여러 협력을 포괄할 수 있는 하나의 협력으로 추상화 할 수 있음
  - 역할: 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식
  - 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체로 한정됨
  - **동일한 역할을 수행하는 객체들이 동일한 메시지를 수신할 수 있기 때문에 동일한 책임을 수행할 수 있다**
  - 단순성(simplicity), 유연성(flexibility), 재사용성(reusability)
- 협력의 추상화
  - 역할을 이용하면 협력을 추상화함으로써 단순화할 수 있음
  - 역할의 대체 가능성에서 비롯
- 대체 가능성
  - 객체는 역할이 암시하는 책임보다 더 많은 책임을 가질 수 있음
  - 좀 더 일반적인 개념을 의미하는 역할: 일반화
    좀 더 구체적인 개념을 의미하는 객체의 타입: 특수화
  ⇒ 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미

### 객체의 모양을 결정하는 협력

- 흔한 오류
  - 시스템에 필요한 데이터를 저장하기 위해 객체는 존재함
  - 객체지향이 클래스와 클래스 간의 관계를 표현하는 시스템의 정적인 측면에 중점을 둠
- 협력을 따라 흐르는 객체의 책임
  - 설계에 참여하는 객체들이 주고받을 요청과 응답의 흐름을 결정
  - 책임, 즉 행동 결정 → 수행에 필요한 데이터 고민 → 클래스 구현 방법 결정

### 객체지향 설계 기법

1. 책임-주도 설계

   : 협력에 필요한 책임을 식별하고 적합한 객체에게 책임을 할당하는 방식

2. 디자인 패턴

   : 책임-주도 결과물인 동시에 지름길

   : 반복적으로 발생하는 문제와 그 문제에 대한 해법의 쌍

   : 공통으로 사용할 수 있는 역할, 책임, 협력의 템플릿

3. 테스트-주도 개발
