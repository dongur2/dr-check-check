# Chapter 07. 물리 메모리 관리

<aside>
💡 학습 목표
- 메모리 관리의 복잡성과 이중성을 이해하고 메모리 관리자의 역할 파악하기
- 논리 주소와 물리 주소의 의미 및 변환 과정
- 메모리 오버레이와 스왑 기법
- 가변 분할 방식과 고정 분할 방식
- 버디시스템의 동작

</aside>

## 메모리 관리의 복잡성과 이중성

- 시분할 시스템에서 여러 프로세스 관리의 복잡성
- 작업의 편리함 vs 관리의 편리함
  → 프로세스 입장에서는 메모리를 차지하고 싶고, 메모리 관리자는 관리를 효율적으로 하고싶음

## 메모리 관리자의 역할

- 메모리 가져오기
  - 실행할 프로세스의 일부만 가져와서 실행하기도 함
- 메모리 배치
  - 메모리를 어떤 크기로 자를 것인지
    - 페이징 → 고정 분할 방식
    - 세그멘테이션 → 가변 분할 방식
- 메모리 재배치
  - 교체 알고리즘: 꽉 찬 메모리에 새로운 프로세스를 가져 오기 위해 오래된 프로세스를 내보내는 작업

⇒ for 시스템 효율

## 논리 주소와 물리 주소

- 논리 주소
  - 메모리 입장에서 바라본 주소(메모리 레지스터가 사용하는 주소)
  - 항상 0번지부터 시작
- 물리 주소
  - 사용자 프로세스 입장에서 바라본 주소
  - 시작 주소 매번 바뀜

⇒ 논리 주소로 이루어진 프로세스를 실행하면 이를 물리 주소로 변환하는 작업 필요 by 메모리 관리 유닛

## 메모리 오버레이와 스왑 기법

- 메모리 오버레이
  - 프로그램의 크기가 물리 메모리 보다 클때 적당한 크기로 잘라서 겹쳐서 실행
- 스왑 기법
  - 메모리가 모자라서 쫓겨난 프로세스를 따로 모아두는 곳
  - 스왑인-스왑아웃
  - 저장장치는 장소만 빌려주고 관리는 메모리 관리자가 함

## 가변 분할 방식과 고정 분할 방식

- 가변 분할 방식
  - 장점: 하나의 프로세스를 연속된 공간에 배치할 수 있음
  - 단점: 메모리 통합이라는 부가 작업이 필요함
  - 세그먼테이션 방식
    - 외부 단편화: 짜투리 메모리 조각이 프로세스 바깥쪽에 위치
  - 메모리 배치 방식
    - 최초 배치
    - 최적 배치
    - 최악 배치
- 고정 분할 방식
  - 장점: 메모리 통합이라는 부가 작업 필요 없어서 메모리 관리가 편함
  - 단점: 하나의 프로세스가 여러 곳으로 나뉨, 낭비되는 공간이 생김
  - 현대 운영체제에서 주로 사용하는 방법
  - 페이징 방식
    - 내부 단편화: 각 메모리 조각에 프로세스 배치하고 남은 짜투리 조각이 프로세스 내부에 위치
    - 남는 공간을 다른 프로세스에 배치할 수 없음

## 버디시스템

- 가변 분할 방식의 단점인 외부 단편화를 완화하는 방법
- 반으로 쪼개고 팀 배치하고 쪼개고 배치하고 반복
- 장점: 비슷한 크기의 덩어리가 모여 있어서 통합하기 쉬움
- 단점: 하나의 프로세스 영역 남은 자리에 다른 프로세스 들어갈 수 없음, 내부 단편화 생김
