# Chapter09. 가상 메모리 관리

<aside>
💡 학습 목표
- 요구 페이징의 개념과 구현 방법
- 페이지 교체 알고리즘의 종류와 동작 원리
- 스레싱의 개념과 스레싱을 완화하는 프레임 할당 방법

</aside>

## 요구 페이징의 개념과 구현 방법

- 요구 페이징
  ⇒ 프로세스가 필요로 하는 페이지를 프로세스가 요청할 때 메모리로 가져오는 것
- 프로세스를 구성하는 모듈 전체를 메모리에 올리지 않고 일부만 가져옴
  1. 메모리의 효율적인 관리를 위해
  2. 응답 속도를 향상시키기 위해
- 페이지 테이블 엔트리(PTE)
  - 페이지 번호, 플래그 비트, 프레임 번호 등 PTE의 정보들을 통해 어떤 페이지를 스왑 영역으로 올릴지 선택(특히 접근 비트와 변경 비트)
- 페이지 부재
  ⇒ 프로세스가 페이지를 요청했는데 그 페이지가 메모리에 있지 않고 스왑에 있는 경우
  - 이 때 스왑에서 메모리로 옮겨야 하는데 어떤 페이지를 옮길지 결정하는 알고리즘
    → 페이지 교체 알고리즘
  - 옮겨질 페이지 → 대상 페이지

## 페이지 교체 알고리즘의 종류

- 페이지 교체 알고리즘
  - 페이지 부재 횟수와 페이지 성공 횟수를 비교해 성능을 평가함
- 간단한 알고리즘
  - 무작위: 말그대로 랜덤으로 선택
  - FIFO: 가장 먼저 들어온 페이지를 선택
- 이론적 알고리즘
  - 최적 페이지 알고리즘
    - 앞으로 사용할 페이지를 미리 살펴보고 페이지 교체 선정 시점부터 사용 시점까지 가장 멀리 있는 페이지 선택
    - 하지만 미래의 페이지 접근 패턴을 알 수 없으므로 불가능한 알고리즘
- **최적 근접 알고리즘**
  - LRU: 시간적으로 멀리 떨어진 페이지 선택
  - LFU: 사용 빈도가 적은 페이지 선택
  - NUR: 최근에 사용한 적 없는 페이지 선택
  - FIFO 변형
    - 2차 기회 페이지 교체 알고리즘
    - 시계 알고리즘

## 스레싱과 스레싱을 완화하는 프레임 할당 방법

- 스레싱
  - 동시에 실행하는 프로그램의 수(멀티프로그래밍의 정도)가 너무 많/높으면 발생
  - 물리메모리 크기를 늘리면 완화 가능하지만 일정 크기 이상이면 영향이 없어짐
- 프레임 할당 방법
  - 정적 할당
    - 균등 할당: 프로세스 크기와 상관없이 같은 크기로 할당
    - 비례 할당: 프로세스 크기에 비례하여 할당
  - 동적 할당
    - 작업 집합 모델 사용
    - 페이지 부재 빈도 사용: 페이지 부재 비율 계산하여 상한선 하한선을 통해 조절
  - 전역 교체 vs 지역 교체
    - 전역 교체 방법이 더 효율적임
