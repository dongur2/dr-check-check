# Chapter 03. 프로세스와 스레드

<aside>
💡 학습목표
- 프로세스의 생성 이후 어떤 상태 변화를 거치는지
- 프로세스 제어 블록의 구성과 문맥 교환 시 동작 과정
- 프로세스의 생성과 복사, 전환 과정 이해
- 스레드 개념 이해, 멀티 스레드 시스템의 장점

</aside>

## 프로세스의 생성과 상태 변화

- 프로세스의 개요
  - _프로그램은 저장장치에 저장된 정적인 상태이고, 프로세스는 실행을 위해 메모리에 올라온 동적인 상태_
  - 레시피가 프로그램이라면 요리하는 행위는 프로세스에 해당
  - 시분할 방식에서의 프로세스
- 프로그램에서 프로세스로의 전환
  1. 운영체제는 프로그램을 메모리의 적당한 위치로 가져옴
  2. 프로세스를 처리하는 데 필요한 다양한 정보를 담고 있는 프로세스 제어 블록(PCB, Process Control Block)을 만들어서 부여함
  ⇒ **즉, 프로그램이 프로세스로 전환되려면 `메모리에 올라오기 + PCB 생성`이 충족되어야 함**
- 프로세스의 상태
  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4c8eaa8-5881-419b-9bcd-2de57386f77c/8d6ce503-1f5b-4bc9-b444-65d4aee4a26e/Untitled.png)

## 프로세스 제어 블록과 문맥 교환

- 프로세스 제어 블록(PCB): 프로세스를 실행하는 데 필요한 중요한 정보를 보관하는 자료 구조
  - 포인터, 프로세스 상태, 프로세스 구분자, 프로세스 카운터, 프로세스 우선순위, 계정 정보(CPU 할당 시간 등), 부모 프로세스 구분자와 자식 프로세스 구분자 등
- 문맥 교환
  - 요리로 치면 주문서와 작업 환경을 바꾸는 것
  - CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아들이는 작업
  - PCB의 내용이 변경됨
  - 발생 상황
    - 프로세스에게 주어진 시간을 다 사용했을 때
    - 인터럽트가 발생했을 때
  - 타임슬라이싱

## 프로세스의 생성과 복사, 전환 과정

- 프로세스의 구조
  - 코드(요리책)
  - 데이터 영역(재료)
  - 스택 영역(조리 도구)
- 프로젝트 생성과 복사, 전환
  - `fork()` : 실행 중인 프로세스로부터 새로운 프로세스를 복사하여 자식 프로세스 생성
    - 프로세스 구분자(PID, 주민번호와 같은 개념)가 변경됨
    - 부모 프로세스 구분자(PPID)와 자식 프로세스 구분자(CPID)가 변경됨
  - `exec()` : `fork()` 로 프로세스 복사한 후 새로운 프로세스로 전환하는 함수
    - 프로세스 구조 재활용 가능
    - 새로운 코드 영역만 가져오면 됨

## 스레드의 개념

- 프로세스는 요리 작업 전체와 같고, 스레드는 각각의 조리 과정
- 프로세스(task) - 스레드(operation)
- CPU 스케줄러가 CPU에 전달하는 작업 단위

## 멀티스레드 시스템의 장점

- 멀티스레드 사용의 목적
  1. 프로세스의 낭비 요소 제거
     1. 스레드끼리 자원을 공유, 동시에 여러 작업 처리 가능
     2. 프로세스의 문맥 교환 시간보다 빠름
  2. 프로세스 작업의 유연성

### 질문 및 느낀점

- 인터럽트의 의미상의 범위가 어떻게 되는지? 타임아웃이 인터럽트의 한 종류?라고 봐도 되는건지
- 스레드와 프로세스 전환(fork, exec)의 차이?
- 자바 코드 상에서 멀티 스레드 이해 못함
