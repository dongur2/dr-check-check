# Chapter 04. CPU 스케줄링

<aside>
💡 학습 목표
- CPU 스케줄링의 의미를 이해하고 단계와 목적을 알아보기
- 스케줄링 시 고려할 사항
- 준비 상태와 대기 상태에서 다중 큐가 어떻게 운영되는지 알아보기
- 스케줄링 알고리즘의 종류와 각 방식의 장단점 파악하기

</aside>

## CPU 스케줄링의 의미 단계 목적

- CPU 스케줄링의 의미
  - CPU 스케줄링 = 프로세서 스케줄러 Processor Scheduler
  - CPU 스케줄링이란 레스토랑의 관리자와 같음
    - 큰: 예약 관리, 좌석 관리
    - 작: 손님의 개별적인 요구에 대응
  - 여러 프로세스의 상황을 고려하여 CPU와 시스템 자원을 어떻게 배정할지 결정
- CPU 스케줄링의 단계
  - 고수준 스케줄링(큰 틀의 관리)
    - 레스토랑의 전체 손님 수 조절
    - 시스템 내의 전체 작업 수를 조절
    - 작업 요청이 오면 시스템의 상황을 고려하여 작업을 승인할지, 거부할지를 결정 (승인 스케줄링)
    - 멀티프로그래밍 정도: 시스템의 전체 프로세스 수 결정
  - 저수준 스케줄링(작은 틀의 관리)
    - 각 손님의 주문과 그에 따른 요리 제공 순서를 미세하게 조절
    - 어떤 프로세스에 CPU를 할당할지, 어떤 프로세스를 대기 상태로 보낼지, 준비 상태로 보낼지, 어떤 기준에 따라 타임 슬라이스를 정할지 등
    - CPU 스케줄러는 특별한 명시가 없는 한 저수준 스케줄러를 의미함
  - 중간 수준 스케줄링
    - 레스토랑 관리자의 판단에 따라 좌석 수를 결정하고 거기에 맞게 손님을 받았는데, 하필 모든 손님이 조리 시간이 긴 코스 요리를 주문한 경우 레스토랑 관리자가 시간이 덜 걸리는 코스 요리로 변경하도록 유도하거나 주문을 천천히 받는 행위
    - 과부하 막는 buffer
    - 중지와 활성화로 전체 시스템의 활성화된 프로세스 수를 조절하여 과부하를 막음
- CPU 스케줄링의 목적
  - 공평성
  - 효율성
  - 안정성
  - 확장성
  - 반응 시간 보장
  - 무한 연기 방지

## 스케줄링 시 고려 사항

- 프로세스 우선순위
  - 더 빨리, 자주 실행됨
  - CPU를 먼저, 오래 차지함
- 선점형 스케줄링 / 비선점형 스케줄링
  - 선점형 스케줄링
    - ex. 인터럽트 처리
    - △ 문맥 교환으로 인한 낭비
    - 대화형 시스템, 시분할 시스템
  - 비선점형 스케줄링
    - △ 처리율이 낮음
- CPU 집중 프로세스 / 입출력 집중 프로세스
  - 사이클 훔치기: 입출력 집중 프로세스가 CPU 집중 프로세스보다 실행 상태에 먼저 들어가는 경우
- 전면 프로세스 / 후면 프로세스
  - 사용자와의 상호작용 여부

## 다중큐 운영

- 준비 상태의 다중 큐
  - 우선 순위 레벨끼리 같은 큐
    - 고정 우선 순위 / 변동 우선 순위
- 대기 상태의 다중 큐
  - 같은 입출력 장치끼리 같은 큐
  - 인터럽트 벡터: 동시에 끝나는 인터럽트 처리하기 위해

## 스케줄링 알고리즘의 종류와 각 방식의 장단점

- 스케줄링 알고리즘의 선택 기준
  - CPU 사용률
  - 처리량
  - 대기 시간
  - 응답 시간
  - 반환 시간

1. FCFS 선입선출

   ○ 단순, 모든 프로세스의 우선순위 동일

   △ 콘보이 효과, 작업 효율 떨어짐

2. SJF 최단 작업 우선 스케줄링

   ○ 대기시간 줄어들어서 효율성 up

   △ 운영체제가 프로세스의 종료 시간 예측하기 힘듦, 공평성 위배(아사 현상)

   → 공평성 위배 문제는 ‘에이징’으로 완화 가능

3. HRN = SJF + Aging 최고 응답률 우선 스케줄링

   ○ 아사 현상 완화

   △ 여전히 공평성 위배

4. RR 라운드 로빈 순환 순서 방식

   ○ 콘보이 효과 완화

   △ 도착하는 순서에 따라 대기 시간 변동 가능성, 문맥 교환 시간 추가됨

5. SRT: Shortest Job First, SJF+RR

   ○ RR보다 평균 대기시간 짧음

   △ 불필요한 작업 추가됨

6. 우선순위

   ○ 프로세스의 중요도에 따라 정해짐

   △ 공평성 위배, 아사 현상, 오버헤드 발생하여 시스템 효율성 저하

7. MLQ

   ○ 우선순위 별로 나눠진 큐, 큐에 삽입되는 것만으로도 우선순위 결정됨

   △ 우선순위 낮은 작업이 많이 불리함

8. MLFQ 다단계 피드백 큐 스케줄링
   - 프로세스가 CPU를 사용한 후 그 프로세스의 우선순위가 1 낮아짐
   - 우선순위가 낮아질수록 해당 큐의 타임 슬라이스가 커짐(가장 우선순위가 낮은 큐는 타임슬라이스가 무한대, FCFS)
