# 07. 물리 메모리 관리

## 메모리 관리의 개요

### 1. **메모리 관리란?**

폰노이만 구조에서 알 수 있듯이, 메모리는 유일한 작업 공간이고 모든 프로그램은 메모리에 올라와야 실행할 수 있다. 컴퓨터에서 실행은 저장장치에 있던 프로그램이 메모리로 올라오는 일련의 과정이라고 봐도 된다.

메모리에 접근할 때는 16진법으로 이루어진 메모리 주소를 이용한다.
물리 주소는 프로그램이 실행될 때마다 변하고, 논리 주소는 항상 0번부터 시작한다.

> 프로세스 입장에서 바라본 주소를 논리 주소라 하고, 물리 메모리 주소를 물리 주소 혹은 실제 주소라고 한다. 논리 주소와 물리 주소의 변환은 메모리 관리유닛(MMU) 가 담당한다

### 2. **단일 프로그래밍 환경의 메모리 할당**

메모리 오버레이 : 프로그램의 크기가 물리 메모리보다 클 때 전체 프로그램을 메모리에 가져오는 대신 적당한 크기로 잘라서 가져오는 기법. 이 방식에서는 프로그램 전체가 아닌 일부만 메모리에 올라와도 실행이 된다 !

스왑 : 메모리가 모자라서 쫓겨난 프로세스를 저장장치의 특별한 공간에 모아두는데 이러한 영역을 스왑 영역이라고 한다. 스왑 영역을 메모리에서 쫓겨났다가 다시 돌아가는 데이터가 머무는 곳이기 때문에 저장장치는 장소만 빌려주고 메모리 관리자가 관리한다.

### 3. **다중 프로그래밍 환경의 메모리 할당**

사실 다중 프로그래밍 환경인 경우가 많기 때문에, 단일 프로그래밍 환경의 메모리 할당보다 메인 프로세스라고 보면 된다. 비교적 복잡하다.
메모리 분할 방식에 따라 크게 두가지 할당법이 있다.

1. 고정 분할 방식: 프로세스의 크기에 상관없이 메모리를 같은 크기로 나눈다.
   페이징(paging) 메모리 관리 기법이라고도 한다.
   고정 분할 방식에서는 내부 단편화가 일어나는데, 조각 모음도 불가능하고 남는 공간을 다른 프로세스에 배정할 수도 없기 때문에 메모리를 어떤 크기로 나눌지 신중히 결정해야 한다,

2. 가변 분할 방식 : 프로세스의 크기에 따라 메모리를 분할한다. 연속 메모리 할당(contiguous memory allocation), 세그멘테이션(segmentation) 메모리 이라고도 한다.
   > 단편화 (fragmentation): 기억 장치의 빈 공간 또는 자료가 여러 개의 조각으로 나뉘는 현상
   > 가변 분할 방식에서는 단편화의 조각이 프로세스의 바깥쪽으로 위치하기 때문에 외부 단편화라고도 한다.

이를 해결하기 위해서 메모리 배치 방식을 조절하거나 조각 모음을 사용한다.

2-1. 버디 시스템 : 가변 분할 방식의 확장판. 메모리에 프로세스를 배치할 때 프로세스의 크기에 맞게 메모리를 1/2 크기로 잘라가며 필요한 메모리 공간만큼에 도달하면 해당 블록을 제공하는 방식이다. 1/2 크기로 잘라가며 내부 단편화를 최소화한다.
![title](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdW5s8O%2Fbtq7icukqtE%2FxsPS4LwA0Is9WpMUTbESHK%2Fimg.png)

다만.. 고정 분할 방식이 최고로 단순하기 때문에, 실제로는 고정 분할 방식을 많이 사용한다. 버디 시스템이 더 효율적으로 보이는데 왜지
