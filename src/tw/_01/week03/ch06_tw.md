# 06. 교착 상태

## 교착 상태의 개요

### 1. **교착 상태란?**

다른 작업이 끝나기를 기다리며 작업을 더이상 진행하지 못하는 상태를 교착 상태라고 한다.
잘못된 정책으로 특정 프로세스 작업이 지연되는 아사 현상과는 다르며, 잠금(lock)을 사용하는 모든 곳에서 자연 발생하는 현상이다.

### 2. **교착 상태의 필요조건**

1. 상호 배제: 한 프로세스가 사용하는 자원이 다른 프로세스와 공유할 수 없는 배타적 자원일 때 교착 상태가 발생한다.

2. 비선점: 한 프로세스가 사용 중인 자우너이 중간에 다른 프로세스가 빼앗을 수 없는 비선점 자원일 때 교착 상태가 발생한다.

3. 점유와 대기: 프로세스가 어떤 자원을 할당받은 상태에서 다른 자원을 기다릴 때 교착 상태가 발생한다.

4. 원형 대기: 점유와 대기를 하는 프로세스 간의 관계가 원을 이루면 서로 양보하지 않아 교착 상태가 발생

--> 위의 네 가지 조건이 **모두** 충족되어야 교착 상태가 발생

### 3. **교착 상태 해결방법**

교착상태 예방 : 교착상태는 위의 4가지 조건들이 만족해야지 발생하기 때문에 이 네 가지 조건 중 어느 하나를 제거하여 교착상태가 발생하지 않도록 하는 방법이 있다.
여러 프로세스가 동시에 자원을 사용하면 상호배제 조건을 제거할 수 있다.
프로세스가 실행되기 전에 필요한 모든 자원을 요구하도록하면 점유와 대기 조건을 제거할 수 있다.
이미 점유중인 자원을 다른 프로세스가 요구하면 그 자원을 빼앗을 수 있도록 하면 비선점 조건을 제거할 수 있다.
각 자원에 번호를 부여하고 각 프로세스는 번호가 낮은 자원부터 높은 자원 순으로 요구하도록 하면 환영 대기 조건을 제거할 수 있다.
교착상태 회피 : 프로세스가 자원을 요구할 때 시스템은 자원을 할당한 후에도 안전 상태를 유지할 수 있는지를 검사하여 교착상태를 회피하게하는 방법이다.
이를 위해 시스템은 각 프로세스가 최대로 요구할 수 있는 자원의 종류와 수량에 대한 정보가 필요하며, 또한 현재 어떤 자원이 어떤 프로세스에게 할당되어 있는지에 대한 정보도 필요하다.

교착상태 발견 및 복구 : 시스템은 주기적으로 교착상태를 검사하고, 교착상태를 발견하면 복구하는 방법이다. 교착상태를 발견하는 알고리즘은 시스템의 자원 할당 상태를 검사하여 교착상태를 발견한다. 복구를 위해서는 교착상태에 있는 프로세스를 종료하거나, 교착상태에 있는 프로세스가 점유하고 있는 자원을 선점하는 방법이 있다.

교착상태 무시 : 교착상태가 발생하는 빈도가 낮거나, 교착상태를 처리하는 비용이 많이 드는 경우에는 교착상태를 무시하고, 사용자가 직접 교착상태를 해결하도록 하는 방법이다. 이 방법은 교착상태가 발생하지 않을 것이라고 가정하며, 실제로 많은 운영체제들이 이 방법을 사용한다.
